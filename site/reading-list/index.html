---
layout: page
title: 'Reading List'
---

<script type="text/javascript">
    function toggleReview(element) {
        if (element.nextElementSibling.style.display === 'none') {
            element.nextElementSibling.style.display = 'block';
            element.innerText = 'Hide Thoughts';
        } else {
            element.nextElementSibling.style.display = 'none';
            element.innerText = 'View My Thoughts';
        }

        return false;
    }

    window.onload = function () {
        initializeMode();

        let dataJson = new Request('/assets/data/readinglist.json', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        });

        fetch(dataJson)
            .then(function (resp) {
                return resp.json();
            })
            .then(function (result) {
                processReadingList(result);
            });
    };

    function processReadingList(data) {
        const years = [];
        Object.keys(data).forEach((key) => {
            switch (key) {
                case 'lastupdate':
                    document.getElementById('lastupdate').innerText = data[key];
                    break;
                case 'current':
                    processCurrent(data[key]);
                    break;
                default:
                    years.push(parseInt(key));
                    break;
            }
        });

        years.sort();
        years.reverse();

        years.forEach((y) => {
            processYear(y, data[y.toString()]);
        });
    }

    function processCurrent(data) {
        data.forEach((book) => {
            const html = `
                <div class="book">
                    <div class="image">
                        <a href="${book.link}">
                            <picture>
                                <source srcset="/assets/images/reading/${book.cover}" media="(min-width: 600px)" />
                                <img src="/assets/images/1x1.png" alt="${book.title} by ${book.author}" />
                            </picture>
                        </a>
                    </div>
                    <div class="info">
                        <h3>
                            <a href="${book.link}">${book.title}</a>
                        </h3>
                        <em>${book.author}</em>
                    </div>
                </div>
            `;

            let newNode = document.createElement('div');
            newNode.innerHTML = html;
            document.getElementById('readinglist_current').appendChild(newNode);
        });
    }

    function processYear(year, data) {
        let newNode = document.createElement('div');
        newNode.innerHTML = `
            <h3>${year}</h3>
            <div id="readinglist_${year}" class="current-list"></div>
        `;
        document.getElementById('readinglist_previous').appendChild(newNode);

        data.forEach((book) => {
            let html = `
                <div class="book" id="book_${book.cover}">
                    <div class="image">
                        <a href="${book.link}">
                            <picture>
                                <source srcset="/assets/images/reading/${book.cover}" media="(min-width: 600px)" />
                                <img src="/assets/images/1x1.png" alt="${book.title} by ${book.author}" />
                            </picture>
                        </a>
                    </div>
                    <div class="info">
                        <h3>
                            <a href="${book.link}">${book.title}</a>
                        </h3>
                        <em>${book.author}</em>
                    </div>
                </div>
            `;

            newNode = document.createElement('div');
            newNode.innerHTML = html;
            document.getElementById(`readinglist_${year}`).appendChild(newNode);

            if (book.rating !== null) {
                html = '<div class="rating">';
                for (let i = 0; i < book.rating; i++) {
                    html += '<img src="/assets/images/rating-star.png" alt="star" />';
                }
                html += '</div>';

                newNode = document.createElement('div');
                newNode.innerHTML = html;
                document.getElementById(`book_${book.cover}`).appendChild(newNode);
            }

            if (book.thoughts !== null) {
                html = `
                    <div class="review">
                        <button onclick="toggleReview(this);return false;">View My Thoughts</button>
                        <div style="display: none;">${book.thoughts}</div>
                    </div>
                `;

                newNode = document.createElement('div');
                newNode.innerHTML = html;
                document.getElementById(`book_${book.cover}`).appendChild(newNode);
            }
        });
    }
</script>

<h1>Reading List</h1>

<div class="content">
    <noscript>
        <p class="centered error"><em>This page requires Javascript to be turned on.</em></p>
    </noscript>

    <p>
        <em>Last Updated: <span id="lastupdate"></span></em>
    </p>

    <h2>Currently Reading</h2>
    <div id="readinglist_current" class="current-list"></div>

    <h2>Previously Read</h2>
    <p><em>Most Recent at Top</em></p>

    <div id="readinglist_previous"></div>
</div>
